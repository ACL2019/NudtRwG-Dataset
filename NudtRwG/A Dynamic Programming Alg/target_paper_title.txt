A Dynamic Programming Algorithm for Computing N-gram Posteriors from Lattices